<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:custom="http://java.sun.com/jsf/composite/tag"
                 template="/template/mainTemplate.xhtml"
                 xmlns:x="http://xpert.com/faces"
                 xmlns:security="http://java.sun.com/jsf/composite/xpert/components/security"
                 xmlns:of="http://omnifaces.org/functions"
                 >

    <ui:define name="body">  

        <script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true'></script>
        <script src="http://www.google.com/jsapi" type="text/javascript" ></script>
        <style type="text/css">
            html, body {
                height: 100%;
                min-width: 480px;
                min-height: 320px;
                margin: 0;
            }
            .gmap {
                min-height: 400px;
                height: 100% !important;
                min-width: 350px;
                width: 100% !important;
            }
        </style>

        <h:form  id="formMaps">
            <div style="height:100%;width: 100%">
                <p:poll interval="10" update="maps denuncias" />

                <p:dashboard id="board" model="#{dashboardView.model}">

                    <p:panel id="atalhos" header="Atalhos" >

                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-lg-12 col-md-2 col-sm-12 col-xs-12">
                                    <h:panelGroup rendered="#{not empty sessaoUsuarioMB.atalhos}" >

                                        <ui:repeat var="permissao" value="#{sessaoUsuarioMB.atalhos}">
                                            <div class="panel panel-default panel-permissao">
                                                <div class="panel-body">
                                                    <h:link outcome="#{permissao.urlMenuVerificado}" styleClass="link-permissao" >
                                                        <h:outputText value="#{permissao.caminhoPermissao}" class="caminho-permissao"/>
                                                        <span class="nome-permissao">
                                                            <h:outputText value="#{permissao.nomeMenuVerificado}"/>
                                                        </span>
                                                    </h:link>
                                                </div>
                                            </div>
                                        </ui:repeat>
                                    </h:panelGroup>
                                </div>
                            </div>
                        </div>
                    </p:panel>

                    <p:panel id="maps" header="Mapa de Denúncias" style="height:500px;width:700px">
                        <p:gmap widgetVar="w_gmap" center="-5.08921,-42.8016" zoom="11" type="ROADMAP" styleClass="gmap"/>
                    </p:panel>

                    <p:panel id="denuncias" header="Denúncias">
                        <h:outputText value="Diária:" /><br/>
                        <h:outputText value="Mensal:" /><br/>
                        <h:outputText value="Semestral:" /><br/>
                        <h:outputText value="Anual:" /><br/>
                        <h:outputText value="Total:" />
                        <!--<p:commandButton id="btn" type="button" icon="ui-icon-pin-s" value="Show Map" onclick="PF('dlg').show();" />-->
                    </p:panel>

                    
                </p:dashboard>



            </div>
        </h:form>

        <p:dialog widgetVar="dlg" header="#{msg['denuncia.detail']}" appendTo="@(body)" 
                  modal="true" styleClass="uix-dialog-fluid" >
            <ui:include src="mapDialog.xhtml" />
        </p:dialog>
    </ui:define>
</ui:composition>
